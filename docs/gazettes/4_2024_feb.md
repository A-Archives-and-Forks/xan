# Xan Gazette: February 2024 Edition

First thing first: our fork of `xsv` is now officially named `xan` and is published on [crates.io](https://crates.io/) as a fully-fledged `rust` crate.

This means installing our fork is now as simple as:

```bash
cargo install xan
```

This also mean we will need to rewire our muscle memory to type `xan` or add a fancy bash alias.

Also, the expression language used by the CLI has also changed name from `xan` to `moonblade` which is Xan's fire sword from Baldur's Gate 1. So emo!

![moonblade](https://static.wikia.nocookie.net/baldursgategame/images/1/1a/Moonblade.png/revision/latest?cb=20121222222319)

## Summary

* [Sleeker flatten command](#sleeker-flatten-command)
* [New moonblade functions](#new-moonblade-functions)
* [Various fixes](#various-fixes)

### Sleeker flatten command

The `flatten` command has been revamped visually to match the visuals of the `view` command:

![sleeker-view](./img/sleeker-flatten.png)

### New moonblade functions

*`count` now accepts regex patterns*

```
count(text, /mr\.\b/i)
```

*`filesize` gives you the size of a file at some path in bytes*

```
filesize(path)
```

*`neg` gives you numerical negation*

```
neg(-1) == 1
```

*`fmt` lets you format strings easily*

```
fmt("{} {}, age: {}", name, surname, age)
```

*`log` gives you natural logarithms*

```
log(occurrences)
```

*`pow` gives you exponentiation*

```
pow(count, 2)
```

*`escape_regex` lets you escape strings for regex*

```
escape_regex("N.A.T.O.")
```

This is very useful to compose regex patterns using the `map` or `transform` command before feeding them to `search --input` or `join --regex`.

*`md5` lets you hash arbitrary strings*

```
md5(read(path))
```

This can be used to pseudonymize a column, e.g.:

```bash
xsv transform name 'md5' file.csv > pseudonimyzed.csv
```

### Various fixes

* The [Freedman-Diaconis](https://en.wikipedia.org/wiki/Freedman%E2%80%93Diaconis_rule) rule used to automatically choose the number of bins use by the `bins` command has been fixed.